<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data-Limited Methods Toolkit (DLMtool 5.1)</title>
  <meta name="description" content="User guide for the DLMtool R package">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="Data-Limited Methods Toolkit (DLMtool 5.1)" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dlmtool.github.io/DLMtool/userguide/introduction.html" />
  
  <meta property="og:description" content="User guide for the DLMtool R package" />
  <meta name="github-repo" content="DLMtool/DLMtool" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data-Limited Methods Toolkit (DLMtool 5.1)" />
  
  <meta name="twitter:description" content="User guide for the DLMtool R package" />
  

<meta name="author" content="Tom Carruthers &amp; Adrian Hordyk">


<meta name="date" content="2018-03-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="favicon-16x16.png" type="image/x-icon">
<link rel="prev" href="customizing-the-operating-model.html">
<link rel="next" href="custom-parameters.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./introduction.html">DLMtool User Guide</a></li>

<li class="divider"></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#data-limited-methods-toolkit"><i class="fa fa-check"></i><b>1.1</b> Data-Limited Methods Toolkit</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#management-strategy-evaluation"><i class="fa fa-check"></i><b>1.2</b> Management Strategy Evaluation</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#how-does-management-strategy-evaluation-differ-from-stock-assessment"><i class="fa fa-check"></i><b>1.3</b> How does Management Strategy Evaluation Differ from Stock Assessment?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#assumed-knowledge"><i class="fa fa-check"></i><b>1.4</b> Assumed Knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#the-user-manual"><i class="fa fa-check"></i><b>1.5</b> The User Manual</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#dlmtool-bug-reports"><i class="fa fa-check"></i><b>1.6</b> DLMtool Bug Reports</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#version-notes"><i class="fa fa-check"></i><b>1.7</b> Version Notes</a></li>
</ul></li>
<li class="part"><span><b>Getting Started with DLMtool</b></span></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#required-software"><i class="fa fa-check"></i><b>2.1</b> Required Software</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#the-r-software"><i class="fa fa-check"></i><b>2.1.1</b> The R Software</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>2.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool"><i class="fa fa-check"></i><b>2.2</b> Installing DLMtool</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-using-r-console"><i class="fa fa-check"></i><b>2.2.1</b> Installing DLMtool using R Console</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-in-rstudio"><i class="fa fa-check"></i><b>2.2.2</b> Installing DLMtool in RStudio</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started.html"><a href="getting-started.html#updating-the-dlmtool-package"><i class="fa fa-check"></i><b>2.2.3</b> Updating the DLMtool Package</a></li>
<li class="chapter" data-level="2.2.4" data-path="getting-started.html"><a href="getting-started.html#checking-dlmtool-version"><i class="fa fa-check"></i><b>2.2.4</b> Checking DLMtool version</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#loading-dlmtool"><i class="fa fa-check"></i><b>2.3</b> Loading DLMtool</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-very-quick-demo.html"><a href="a-very-quick-demo.html"><i class="fa fa-check"></i><b>3</b> A Very Quick Demo</a></li>
<li class="chapter" data-level="4" data-path="the-operating-model.html"><a href="the-operating-model.html"><i class="fa fa-check"></i><b>4</b> The Operating Model</a><ul>
<li class="chapter" data-level="4.1" data-path="the-operating-model.html"><a href="the-operating-model.html#om-components"><i class="fa fa-check"></i><b>4.1</b> OM Components</a><ul>
<li class="chapter" data-level="4.1.1" data-path="the-operating-model.html"><a href="the-operating-model.html#stock-object"><i class="fa fa-check"></i><b>4.1.1</b> Stock Object</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-operating-model.html"><a href="the-operating-model.html#fleet-object"><i class="fa fa-check"></i><b>4.1.2</b> Fleet Object</a></li>
<li class="chapter" data-level="4.1.3" data-path="the-operating-model.html"><a href="the-operating-model.html#obs-object"><i class="fa fa-check"></i><b>4.1.3</b> Obs Object</a></li>
<li class="chapter" data-level="4.1.4" data-path="the-operating-model.html"><a href="the-operating-model.html#imp-object"><i class="fa fa-check"></i><b>4.1.4</b> Imp Object</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-operating-model.html"><a href="the-operating-model.html#building-an-om-from-component-objects"><i class="fa fa-check"></i><b>4.2</b> Building an OM from Component Objects</a></li>
<li class="chapter" data-level="4.3" data-path="the-operating-model.html"><a href="the-operating-model.html#visualizing-an-om"><i class="fa fa-check"></i><b>4.3</b> Visualizing an OM</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="management-procedures.html"><a href="management-procedures.html"><i class="fa fa-check"></i><b>5</b> Management Procedures</a><ul>
<li class="chapter" data-level="5.1" data-path="management-procedures.html"><a href="management-procedures.html#what-is-a-management-procedure"><i class="fa fa-check"></i><b>5.1</b> What is a Management Procedure?</a></li>
<li class="chapter" data-level="5.2" data-path="management-procedures.html"><a href="management-procedures.html#available-management-procedure"><i class="fa fa-check"></i><b>5.2</b> Available Management Procedure</a></li>
<li class="chapter" data-level="5.3" data-path="management-procedures.html"><a href="management-procedures.html#types-of-management-procedure"><i class="fa fa-check"></i><b>5.3</b> Types of Management Procedure</a><ul>
<li class="chapter" data-level="5.3.1" data-path="management-procedures.html"><a href="management-procedures.html#input-control-mps"><i class="fa fa-check"></i><b>5.3.1</b> Input Control MPs</a></li>
<li class="chapter" data-level="5.3.2" data-path="management-procedures.html"><a href="management-procedures.html#output-control-mps"><i class="fa fa-check"></i><b>5.3.2</b> Output Control MPs</a></li>
<li class="chapter" data-level="5.3.3" data-path="management-procedures.html"><a href="management-procedures.html#mixed-mps"><i class="fa fa-check"></i><b>5.3.3</b> Mixed MPs</a></li>
<li class="chapter" data-level="5.3.4" data-path="management-procedures.html"><a href="management-procedures.html#reference-mps"><i class="fa fa-check"></i><b>5.3.4</b> Reference MPs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="running-the-mse.html"><a href="running-the-mse.html"><i class="fa fa-check"></i><b>6</b> Running the MSE</a><ul>
<li class="chapter" data-level="6.1" data-path="running-the-mse.html"><a href="running-the-mse.html#specify-an-operating-model"><i class="fa fa-check"></i><b>6.1</b> Specify an Operating Model</a></li>
<li class="chapter" data-level="6.2" data-path="running-the-mse.html"><a href="running-the-mse.html#choose-the-management-procedures"><i class="fa fa-check"></i><b>6.2</b> Choose the Management Procedures</a></li>
<li class="chapter" data-level="6.3" data-path="running-the-mse.html"><a href="running-the-mse.html#run-the-mse"><i class="fa fa-check"></i><b>6.3</b> Run the MSE</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-convergence.html"><a href="checking-convergence.html"><i class="fa fa-check"></i><b>7</b> Checking Convergence</a></li>
<li class="chapter" data-level="8" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html"><i class="fa fa-check"></i><b>8</b> Plotting the MSE Results</a><ul>
<li class="chapter" data-level="8.1" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html#trade-off-plots"><i class="fa fa-check"></i><b>8.1</b> Trade-Off Plots</a></li>
<li class="chapter" data-level="8.2" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html#wormplot"><i class="fa fa-check"></i><b>8.2</b> Wormplot</a></li>
<li class="chapter" data-level="8.3" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html#projection-plots"><i class="fa fa-check"></i><b>8.3</b> Projection Plots</a></li>
<li class="chapter" data-level="8.4" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html#kobe-plots"><i class="fa fa-check"></i><b>8.4</b> Kobe Plots</a></li>
<li class="chapter" data-level="8.5" data-path="plotting-the-mse-results.html"><a href="plotting-the-mse-results.html#compare-to-current-conditions"><i class="fa fa-check"></i><b>8.5</b> Compare to Current Conditions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>9</b> Parallel Processing</a><ul>
<li class="chapter" data-level="9.1" data-path="parallel-processing.html"><a href="parallel-processing.html#setting-up-parallel-processing"><i class="fa fa-check"></i><b>9.1</b> Setting up Parallel Processing</a></li>
<li class="chapter" data-level="9.2" data-path="parallel-processing.html"><a href="parallel-processing.html#running-mse-with-parallel-processing"><i class="fa fa-check"></i><b>9.2</b> Running MSE with Parallel Processing</a></li>
<li class="chapter" data-level="9.3" data-path="parallel-processing.html"><a href="parallel-processing.html#determining-optimal-number-of-processors"><i class="fa fa-check"></i><b>9.3</b> Determining Optimal Number of Processors</a></li>
</ul></li>
<li class="part"><span><b>Creating an Operating Model</b></span></li>
<li class="chapter" data-level="10" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html"><i class="fa fa-check"></i><b>10</b> Creating a New Operating Model</a><ul>
<li class="chapter" data-level="10.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example-workflow"><i class="fa fa-check"></i><b>10.1</b> An Example WorkFlow</a></li>
<li class="chapter" data-level="10.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#create-a-new-project"><i class="fa fa-check"></i><b>10.2</b> Create a New Project</a></li>
<li class="chapter" data-level="10.3" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#initialize-a-new-om"><i class="fa fa-check"></i><b>10.3</b> Initialize a New OM</a><ul>
<li class="chapter" data-level="10.3.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#using-templates"><i class="fa fa-check"></i><b>10.3.1</b> Using Templates</a></li>
<li class="chapter" data-level="10.3.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example"><i class="fa fa-check"></i><b>10.3.2</b> An Example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#populate-and-document-om"><i class="fa fa-check"></i><b>10.4</b> Populate and Document OM</a></li>
<li class="chapter" data-level="10.5" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#compile-the-om-report"><i class="fa fa-check"></i><b>10.5</b> Compile the OM Report</a></li>
<li class="chapter" data-level="10.6" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#import-the-om-into-r"><i class="fa fa-check"></i><b>10.6</b> Import the OM into R</a></li>
<li class="chapter" data-level="10.7" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#documenting-an-existing-om"><i class="fa fa-check"></i><b>10.7</b> Documenting an Existing OM</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="operating-model-library.html"><a href="operating-model-library.html"><i class="fa fa-check"></i><b>11</b> Operating Model Library</a></li>
<li class="part"><span><b>Interpreting MSE Results</b></span></li>
<li class="chapter" data-level="12" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html"><i class="fa fa-check"></i><b>12</b> Examining the MSE object</a><ul>
<li class="chapter" data-level="12.1" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#run-an-mse"><i class="fa fa-check"></i><b>12.1</b> Run an MSE</a></li>
<li class="chapter" data-level="12.2" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-mse-object"><i class="fa fa-check"></i><b>12.2</b> The MSE Object</a><ul>
<li class="chapter" data-level="12.2.1" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-first-six-slots"><i class="fa fa-check"></i><b>12.2.1</b> The First Six Slots</a></li>
<li class="chapter" data-level="12.2.2" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-om-slot"><i class="fa fa-check"></i><b>12.2.2</b> The <code>OM</code> Slot</a></li>
<li class="chapter" data-level="12.2.3" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-obs-slot"><i class="fa fa-check"></i><b>12.2.3</b> The <code>Obs</code> Slot</a></li>
<li class="chapter" data-level="12.2.4" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b_bmsy-and-f_fmsy-slots"><i class="fa fa-check"></i><b>12.2.4</b> The <code>B_BMSY</code> and <code>F_FMSY</code> Slots</a></li>
<li class="chapter" data-level="12.2.5" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b-fm-c-and-tac-slots"><i class="fa fa-check"></i><b>12.2.5</b> The <code>B</code>, <code>FM</code>, <code>C</code> and <code>TAC</code> Slots</a></li>
<li class="chapter" data-level="12.2.6" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-ssb_hist-cb_hist-and-fm_hist-slots"><i class="fa fa-check"></i><b>12.2.6</b> The <code>SSB_hist</code>, <code>CB_hist</code>, and <code>FM_hist</code> Slots</a></li>
<li class="chapter" data-level="12.2.7" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-effort-slot"><i class="fa fa-check"></i><b>12.2.7</b> The <code>Effort</code> Slot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="performance-metrics.html"><a href="performance-metrics.html"><i class="fa fa-check"></i><b>13</b> Performance Metrics</a><ul>
<li class="chapter" data-level="13.1" data-path="performance-metrics.html"><a href="performance-metrics.html#the-need-for-performance-metrics"><i class="fa fa-check"></i><b>13.1</b> The Need for Performance Metrics</a></li>
<li class="chapter" data-level="13.2" data-path="performance-metrics.html"><a href="performance-metrics.html#inevitable-trade-offs"><i class="fa fa-check"></i><b>13.2</b> Inevitable Trade-Offs</a><ul>
<li class="chapter" data-level="13.2.1" data-path="performance-metrics.html"><a href="performance-metrics.html#operational-management-objectives"><i class="fa fa-check"></i><b>13.2.1</b> Operational Management Objectives</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="performance-metrics.html"><a href="performance-metrics.html#performance-metrics-in-the-dlmtool"><i class="fa fa-check"></i><b>13.3</b> Performance Metrics in the DLMtool</a><ul>
<li class="chapter" data-level="13.3.1" data-path="performance-metrics.html"><a href="performance-metrics.html#fishing-mortality"><i class="fa fa-check"></i><b>13.3.1</b> Fishing Mortality</a></li>
<li class="chapter" data-level="13.3.2" data-path="performance-metrics.html"><a href="performance-metrics.html#stock-biomass"><i class="fa fa-check"></i><b>13.3.2</b> Stock Biomass</a></li>
<li class="chapter" data-level="13.3.3" data-path="performance-metrics.html"><a href="performance-metrics.html#developing-additional-performance-metrics"><i class="fa fa-check"></i><b>13.3.3</b> Developing Additional Performance Metrics</a></li>
<li class="chapter" data-level="13.3.4" data-path="performance-metrics.html"><a href="performance-metrics.html#summarizing-management-procedure-performance"><i class="fa fa-check"></i><b>13.3.4</b> Summarizing Management Procedure Performance</a></li>
<li class="chapter" data-level="13.3.5" data-path="performance-metrics.html"><a href="performance-metrics.html#plotting-mse-results"><i class="fa fa-check"></i><b>13.3.5</b> Plotting MSE Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="value-of-information.html"><a href="value-of-information.html"><i class="fa fa-check"></i><b>14</b> Value of Information</a></li>
<li class="part"><span><b>Using Fishery Data</b></span></li>
<li class="chapter" data-level="15" data-path="the-fishery-data-object-data.html"><a href="the-fishery-data-object-data.html"><i class="fa fa-check"></i><b>15</b> The Fishery Data Object (Data)</a><ul>
<li class="chapter" data-level="15.1" data-path="the-fishery-data-object-data.html"><a href="the-fishery-data-object-data.html#in-the-mse"><i class="fa fa-check"></i><b>15.1</b> In the MSE</a></li>
<li class="chapter" data-level="15.2" data-path="the-fishery-data-object-data.html"><a href="the-fishery-data-object-data.html#application-of-management-procedures-using-real-fisheries-data"><i class="fa fa-check"></i><b>15.2</b> Application of Management Procedures Using Real Fisheries Data</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="example-data-objects.html"><a href="example-data-objects.html"><i class="fa fa-check"></i><b>16</b> Example Data Objects</a></li>
<li class="chapter" data-level="17" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html"><i class="fa fa-check"></i><b>17</b> Creating Your Own Data Object</a><ul>
<li class="chapter" data-level="17.1" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#creating-a-data-file-in-excel"><i class="fa fa-check"></i><b>17.1</b> Creating a Data File in Excel</a></li>
<li class="chapter" data-level="17.2" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#importing-the-data-object"><i class="fa fa-check"></i><b>17.2</b> Importing the Data object</a></li>
<li class="chapter" data-level="17.3" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#example-fishery-data-files"><i class="fa fa-check"></i><b>17.3</b> Example Fishery Data Files</a></li>
<li class="chapter" data-level="17.4" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#populating-a-data-object-in-r"><i class="fa fa-check"></i><b>17.4</b> Populating a Data Object in R</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="plotting-data-objects.html"><a href="plotting-data-objects.html"><i class="fa fa-check"></i><b>18</b> Plotting Data Objects</a></li>
<li class="chapter" data-level="19" data-path="determining-which-mps-can-be-applied.html"><a href="determining-which-mps-can-be-applied.html"><i class="fa fa-check"></i><b>19</b> Determining Which MPs Can Be Applied</a></li>
<li class="chapter" data-level="20" data-path="applying-management-procedures.html"><a href="applying-management-procedures.html"><i class="fa fa-check"></i><b>20</b> Applying Management Procedures</a></li>
<li class="part"><span><b>Advanced DLMtool</b></span></li>
<li class="chapter" data-level="21" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html"><i class="fa fa-check"></i><b>21</b> Customizing the Operating Model</a><ul>
<li class="chapter" data-level="21.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#accounting-for-historical-changes-in-fishing"><i class="fa fa-check"></i><b>21.1</b> Accounting for Historical Changes in Fishing</a><ul>
<li class="chapter" data-level="21.1.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-fishing-mortality"><i class="fa fa-check"></i><b>21.1.1</b> Historical Trends in Fishing Mortality</a></li>
<li class="chapter" data-level="21.1.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-selectivity-pattern"><i class="fa fa-check"></i><b>21.1.2</b> Historical Trends in Selectivity Pattern</a></li>
<li class="chapter" data-level="21.1.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#including-existing-mpas"><i class="fa fa-check"></i><b>21.1.3</b> Including Existing MPAs</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#size-specific-natural-mortality"><i class="fa fa-check"></i><b>21.2</b> Size-Specific Natural Mortality</a><ul>
<li class="chapter" data-level="21.2.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#constant-m-at-agesize"><i class="fa fa-check"></i><b>21.2.1</b> Constant M at age/size</a></li>
<li class="chapter" data-level="21.2.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#lorenzen-function-of-weight"><i class="fa fa-check"></i><b>21.2.2</b> Lorenzen function of weight</a></li>
<li class="chapter" data-level="21.2.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-age-specific-m"><i class="fa fa-check"></i><b>21.2.3</b> Map Age-Specific M</a></li>
<li class="chapter" data-level="21.2.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-length-specific-m"><i class="fa fa-check"></i><b>21.2.4</b> Map Length-Specific M</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#selection-retention-and-discard-mortality"><i class="fa fa-check"></i><b>21.3</b> Selection, Retention and Discard Mortality</a><ul>
<li class="chapter" data-level="21.3.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-selection-curve"><i class="fa fa-check"></i><b>21.3.1</b> Fishery Selection Curve</a></li>
<li class="chapter" data-level="21.3.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-retention-curve"><i class="fa fa-check"></i><b>21.3.2</b> Fishery Retention Curve</a></li>
<li class="chapter" data-level="21.3.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#discard-mortality"><i class="fa fa-check"></i><b>21.3.3</b> Discard Mortality</a></li>
<li class="chapter" data-level="21.3.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#general-discarding"><i class="fa fa-check"></i><b>21.3.4</b> General Discarding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html"><i class="fa fa-check"></i><b>22</b> Developing Custom Management Procedures</a><ul>
<li class="chapter" data-level="22.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#the-anatomy-of-an-mp"><i class="fa fa-check"></i><b>22.1</b> The Anatomy of an MP</a></li>
<li class="chapter" data-level="22.2" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-constant-catch-mp"><i class="fa fa-check"></i><b>22.2</b> A Constant Catch MP</a></li>
<li class="chapter" data-level="22.3" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-more-complex-mp"><i class="fa fa-check"></i><b>22.3</b> A More Complex MP</a></li>
<li class="chapter" data-level="22.4" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#beyond-the-catch-limit"><i class="fa fa-check"></i><b>22.4</b> Beyond the Catch Limit</a><ul>
<li class="chapter" data-level="22.4.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#an-example-effort-control"><i class="fa fa-check"></i><b>22.4.1</b> An Example Effort Control</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="custom-parameters.html"><a href="custom-parameters.html"><i class="fa fa-check"></i><b>23</b> Custom Parameters</a><ul>
<li class="chapter" data-level="23.1" data-path="custom-parameters.html"><a href="custom-parameters.html#valid-cpars-names"><i class="fa fa-check"></i><b>23.1</b> Valid cpars names</a></li>
<li class="chapter" data-level="23.2" data-path="custom-parameters.html"><a href="custom-parameters.html#correlated-samples"><i class="fa fa-check"></i><b>23.2</b> Correlated samples</a></li>
<li class="chapter" data-level="23.3" data-path="custom-parameters.html"><a href="custom-parameters.html#custom-time-varying-parameters"><i class="fa fa-check"></i><b>23.3</b> Custom time-varying parameters</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html"><i class="fa fa-check"></i><b>24</b> Subsetting the MSE Object</a><ul>
<li class="chapter" data-level="24.1" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-performance"><i class="fa fa-check"></i><b>24.1</b> Subsetting by Performance</a></li>
<li class="chapter" data-level="24.2" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-operating-model-parameters"><i class="fa fa-check"></i><b>24.2</b> Subsetting by Operating Model Parameters</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html"><i class="fa fa-check"></i><b>25</b> Custom Performance Metrics</a><ul>
<li class="chapter" data-level="25.1" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#the-pm-object"><i class="fa fa-check"></i><b>25.1</b> The PM Object</a></li>
<li class="chapter" data-level="25.2" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#developing-custom-pms"><i class="fa fa-check"></i><b>25.2</b> Developing Custom PMs</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>A</b> Acknowledgements</a></li>
<li class="chapter" data-level="B" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>B</b> References</a></li>
<li class="chapter" data-level="C" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>C</b> Getting Help</a><ul>
<li class="chapter" data-level="C.1" data-path="getting-help.html"><a href="getting-help.html#first-time-working-with-r"><i class="fa fa-check"></i><b>C.1</b> First Time Working With R?</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#the-r-software-1"><i class="fa fa-check"></i>The R Software</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#rstudio-1"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="getting-help.html"><a href="getting-help.html#loadDLM"><i class="fa fa-check"></i><b>C.2</b> Installing the DLMtool Package</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-r-console-1"><i class="fa fa-check"></i>Installing DLMtool Using R Console</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-rstudio"><i class="fa fa-check"></i>Installing DLMtool Using RStudio</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#updating-the-dlmtool-package-1"><i class="fa fa-check"></i>Updating the DLMtool Package</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#loading-the-dlmtool-package"><i class="fa fa-check"></i>Loading the DLMtool Package</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="getting-help.html"><a href="getting-help.html#a-brief-note-on-s4-methods"><i class="fa fa-check"></i><b>C.3</b> A Brief Note on S4 Methods</a></li>
<li class="chapter" data-level="C.4" data-path="getting-help.html"><a href="getting-help.html#additional-help-on-the-dlmtool"><i class="fa fa-check"></i><b>C.4</b> Additional Help on the DLMtool</a></li>
<li class="chapter" data-level="C.5" data-path="getting-help.html"><a href="getting-help.html#questions-on-r-related-problems"><i class="fa fa-check"></i><b>C.5</b> Questions on R-related Problems</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html"><i class="fa fa-check"></i><b>D</b> Assumptions of DLMtool</a><ul>
<li class="chapter" data-level="D.1" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#biology"><i class="fa fa-check"></i><b>D.1</b> Biology</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#short-lived-species"><i class="fa fa-check"></i>Short-Lived Species</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#density-dependent-compensation"><i class="fa fa-check"></i>Density-Dependent Compensation</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#von-bertalanffy-growth"><i class="fa fa-check"></i>von Bertalanffy Growth</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#natural-mortality-rate-at-age"><i class="fa fa-check"></i>Natural Mortality Rate at Age</a></li>
</ul></li>
<li class="chapter" data-level="D.2" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#mse-model-assumptions"><i class="fa fa-check"></i><b>D.2</b> MSE Model Assumptions</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#retention-and-selectivity"><i class="fa fa-check"></i>Retention and Selectivity</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#non-convergence-of-management-procedure"><i class="fa fa-check"></i>Non-Convergence of Management Procedure</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#idealised-observation-models-for-catch-composition-data"><i class="fa fa-check"></i>Idealised Observation Models for Catch Composition Data</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#two-box-model"><i class="fa fa-check"></i>Two-Box Model</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#ontogenetic-habitat-shifts"><i class="fa fa-check"></i>Ontogenetic Habitat Shifts</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#closed-system"><i class="fa fa-check"></i>Closed System</a></li>
</ul></li>
<li class="chapter" data-level="D.3" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#management-procedures-1"><i class="fa fa-check"></i><b>D.3</b> Management Procedures</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#harvest-control-rules-must-be-integrated-into-data-limited-mps"><i class="fa fa-check"></i>Harvest Control Rules Must be Integrated into Data-Limited MPs</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-and-method-application"><i class="fa fa-check"></i><b>D.4</b> Data and Method Application</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-assumed-to-be-representative"><i class="fa fa-check"></i>Data Assumed to be Representative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="changes.html"><a href="changes.html"><i class="fa fa-check"></i><b>E</b> Changes</a><ul>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.1-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.1 and greater</a></li>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.5-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.5 and greater</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://www.datalimitedtoolkit.com" target="blank">DLMtool Website</a></li>
<li><a href="../index.html">DLMtool Documentation</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data-Limited Methods Toolkit (DLMtool 5.1)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="developing-custom-management-procedures" class="section level1">
<h1><span class="header-section-number">Chapter 22</span> Developing Custom Management Procedures</h1>
<p>DLMtool was designed to be extensible in order to promote the development of new Management Procedures. In this chapter we design a series of new Management Procedures that include spatial controls and input controls in the form of size limit restrictions.</p>
<p>If you wish, you can also add your newly developed MPs to the DLMtool package so they are accessible to other uses. Of course you will be credited as the author. Please <a href="http://www.datalimitedtoolkit.org/contact">contact us</a> for details how to do this.</p>
<p>As we saw before, real data are stored in a class of objects <code>Data</code>.</p>
<p>The DLMtool MSE function generates simulated data and puts it in exactly the same format as real data. This is highly desirable because it means that the same MP code that is tested in the MSE can then be used to make management recommendations.</p>
<p>If an MP is coded incorrectly it may catastrophically fail MSE testing and will therefore be excluded from use in management.</p>
<div id="the-anatomy-of-an-mp" class="section level2">
<h2><span class="header-section-number">22.1</span> The Anatomy of an MP</h2>
<p>Let’s examine an existing output MP to identify the MP data requirements.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">avail</span>(<span class="st">&#39;Output&#39;</span>)</code></pre></div>
<pre><code>##  [1] &quot;AvC&quot;         &quot;BK&quot;          &quot;BK_CC&quot;       &quot;BK_ML&quot;       &quot;CC1&quot;        
##  [6] &quot;CC4&quot;         &quot;CompSRA&quot;     &quot;CompSRA4010&quot; &quot;DAAC&quot;        &quot;DBSRA&quot;      
## [11] &quot;DBSRA_40&quot;    &quot;DBSRA4010&quot;   &quot;DCAC&quot;        &quot;DCAC_40&quot;     &quot;DCAC_ML&quot;    
## [16] &quot;DCAC4010&quot;    &quot;DD&quot;          &quot;DD4010&quot;      &quot;DepF&quot;        &quot;DynF&quot;       
## [21] &quot;Fadapt&quot;      &quot;Fdem&quot;        &quot;Fdem_CC&quot;     &quot;Fdem_ML&quot;     &quot;Fratio&quot;     
## [26] &quot;Fratio_CC&quot;   &quot;Fratio_ML&quot;   &quot;Fratio4010&quot;  &quot;GB_CC&quot;       &quot;GB_slope&quot;   
## [31] &quot;GB_target&quot;   &quot;Gcontrol&quot;    &quot;HDAAC&quot;       &quot;Islope1&quot;     &quot;Islope4&quot;    
## [36] &quot;IT10&quot;        &quot;IT5&quot;         &quot;Itarget1&quot;    &quot;Itarget4&quot;    &quot;ITM&quot;        
## [41] &quot;L95target&quot;   &quot;LstepCC1&quot;    &quot;LstepCC4&quot;    &quot;Ltarget1&quot;    &quot;Ltarget4&quot;   
## [46] &quot;MCD&quot;         &quot;MCD4010&quot;     &quot;Rcontrol&quot;    &quot;Rcontrol2&quot;   &quot;SBT1&quot;       
## [51] &quot;SBT2&quot;        &quot;SPmod&quot;       &quot;SPMSY&quot;       &quot;SPslope&quot;     &quot;SPSRA&quot;      
## [56] &quot;SPSRA_ML&quot;    &quot;YPR&quot;         &quot;YPR_CC&quot;      &quot;YPR_ML&quot;</code></pre>
<p>Since we’ve seen it used as a default MP in lots of the examples above, lets learn more about DCAC</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?DCAC</code></pre></div>
<p>We can even see all the code for this MP by simply typing the name of the MP into the console (this is a fantastic advantage of using R - there is complete transparency about package functions):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DCAC</code></pre></div>
<pre><code>## function (x, Data, reps = 100) 
## {
##     dependencies = &quot;Data@AvC, Data@t, Data@Mort, Data@CV_Mort, Data@FMSY_M, Data@CV_FMSY_M, Data@Dt, Data@CV_Dt, Data@BMSY_B0, Data@CV_BMSY_B0&quot;
##     C_tot &lt;- Data@AvC[x] * Data@t[x]
##     Mdb &lt;- trlnorm(reps, Data@Mort[x], Data@CV_Mort[x])
##     FMSY_M &lt;- trlnorm(reps, Data@FMSY_M[x], Data@CV_FMSY_M[x])
##     Bt_K &lt;- trlnorm(reps, Data@Dt[x], Data@CV_Dt[x])
##     if (any(is.na(c(Data@BMSY_B0[x], Data@CV_BMSY_B0[x])))) 
##         return(NA)
##     BMSY_K &lt;- rbeta(reps, alphaconv(Data@BMSY_B0[x], Data@BMSY_B0[x] * 
##         Data@CV_BMSY_B0[x]), betaconv(Data@BMSY_B0[x], Data@BMSY_B0[x] * 
##         Data@CV_BMSY_B0[x]))
##     Rec &lt;- new(&quot;Rec&quot;)
##     Rec@TAC &lt;- TACfilter(C_tot/(Data@t[x] + ((1 - Bt_K)/(BMSY_K * 
##         FMSY_M * Mdb))))
##     Rec
## }
## &lt;bytecode: 0x000000001fd8ebd0&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>“Crikey that looks complicated!” might be your first reaction. However this output MP function is easily demystified.</p>
<p>Like all MPs it has three arguments: <code>x</code>, <code>Data</code> and <code>reps</code>.</p>
<p>The argument <code>x</code> is the position in the Data object. When real data are stored in a Data object, there is only one position - there is only one real data set.</p>
<p>However, in MSE we conduct many simulations and x refers to simulated data from simulation number <code>x</code>. Any single parameters such as natural mortality rate (<code>Mort</code>) are a vector (<code>nsim</code> long). See <code>Data@Mort[x]</code> in the DCAC code. Any time series such as annual catches or relative abundance indices, are a matrix of <code>nsim</code> rows and <code>nyears</code> columns.</p>
<p>A range of objects of class Data are available:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">avail</span>(<span class="st">&#39;Data&#39;</span>)</code></pre></div>
<pre><code>##  [1] &quot;Atlantic_mackerel&quot;  &quot;China_rockfish&quot;     &quot;Cobia&quot;             
##  [4] &quot;Example_datafile&quot;   &quot;Gulf_blue_tilefish&quot; &quot;ourReefFish&quot;       
##  [7] &quot;Red_snapper&quot;        &quot;SimulatedData&quot;      &quot;Simulation_1&quot;      
## [10] &quot;China_rockfish2&quot;    &quot;Madeup&quot;             &quot;Recs&quot;</code></pre>
<p>For simplicity lets use a Data object with just one simulation, <code>Simulation_1</code> and rename it <code>Data</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Data &lt;-<span class="st"> </span>Simulation_<span class="dv">1</span></code></pre></div>
<p>Since there is only one simulation in this data set (1 position) we can now see a single value of natural mortality rate:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Data<span class="op">@</span>Mort</code></pre></div>
<pre><code>## [1] 0.2244735</code></pre>
<p>And a matrix of catches with only 1 row:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Data<span class="op">@</span>Cat</code></pre></div>
<pre><code>##          [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]
## [1,] 4.275057 12.43761 14.63192 35.31725 28.69802 30.84651 24.14059
##          [,8]     [,9]    [,10]    [,11]    [,12]    [,13]    [,14]
## [1,] 36.78335 29.27517 38.18088 59.30242 56.08995 37.96849 51.84985
##         [,15]    [,16]    [,17]   [,18]   [,19]    [,20]    [,21]    [,22]
## [1,] 60.76729 41.53713 39.31114 57.9673 57.2248 72.37596 80.69301 76.63558
##         [,23]    [,24]    [,25]    [,26]    [,27]    [,28]    [,29]  [,30]
## [1,] 59.37687 48.82643 50.38803 80.71158 53.35875 74.31955 48.83082 43.348
##         [,31]    [,32]    [,33]    [,34]    [,35]    [,36]    [,37]
## [1,] 65.17864 49.94281 47.38492 45.23197 80.92438 51.91477 29.36491
##         [,38]    [,39]    [,40]    [,41]    [,42]    [,43]    [,44]
## [1,] 43.44834 49.46923 50.33217 49.53639 39.28779 27.31767 38.97092
##        [,45]    [,46]    [,47]    [,48]    [,49]    [,50]
## [1,] 51.1054 37.34677 37.33128 24.24094 23.47756 21.08158</code></pre>
<p>We could generate a single TAC recommendation from these data using DCAC by specifying position 1 (there is only 1 simulation) and by setting reps=1 (we want a single DCAC TAC recommendation)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">DCAC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">1</span>)</code></pre></div>
<pre><code>## TAC (median) 
##      37.5485</code></pre>
<p>If we wanted a stochastic estimate of the TAC we could increase the number of reps:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(<span class="kw">DCAC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">1000</span>)<span class="op">@</span>TAC,<span class="dt">xlab=</span><span class="st">&quot;TAC&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Freq.&quot;</span>,<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
</div>
<div id="a-constant-catch-mp" class="section level2">
<h2><span class="header-section-number">22.2</span> A Constant Catch MP</h2>
<p>We’ve now got a better idea of the anatomy of an MP. It is a function that must accept three arguments:</p>
<ul>
<li>x: a simulation number</li>
<li>Data: an object of class <code>Data</code></li>
<li>reps: the MP can provide a sample of TACs <code>reps</code> long.</li>
</ul>
<p>Let’s have a go at designing our own custom MP that can work with DLMtool. We’re going to develop an MP that sets the TAC as the ‘3rd highest catch’.</p>
<p>We decide to call our function <code>THC</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">THC&lt;-<span class="cf">function</span>(x, Data, reps){
  
  <span class="co"># Find the position of third highest catch</span>
  
  THCpos&lt;-<span class="kw">order</span>(Data<span class="op">@</span>Cat[x,],<span class="dt">decreasing=</span>T)[<span class="dv">3</span>]
  
  <span class="co"># Make this the mean TAC recommendation</span>
  
  THCmu&lt;-Data<span class="op">@</span>Cat[x,THCpos]
  
  <span class="co"># A sample of the THC is taken according to a fixed CV of 10%</span>
  TACs &lt;-<span class="st"> </span>THCmu <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="op">-</span><span class="fl">0.1</span><span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, <span class="fl">0.1</span>)) <span class="co"># this is a lognormal distribution</span>

  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>) <span class="co"># create a &#39;Rec&#39;object</span>
  Rec<span class="op">@</span>TAC &lt;-<span class="st"> </span>TACs <span class="co"># assign the TACs to the TAC slot</span>
  Rec <span class="co"># return the Rec object</span>
}</code></pre></div>
<p>To recap that’s just seven lines of code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">THC&lt;-<span class="cf">function</span>(x, Data, reps){
  THCpos&lt;-<span class="kw">order</span>(Data<span class="op">@</span>Cat[x,],<span class="dt">decreasing=</span>T)[<span class="dv">3</span>]
  THCmu&lt;-Data<span class="op">@</span>Cat[x,THCpos]
  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)
  Rec<span class="op">@</span>TAC &lt;-<span class="st"> </span>THCmu <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="op">-</span><span class="fl">0.1</span><span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, <span class="fl">0.1</span>))
  Rec
}</code></pre></div>
<p>We can quickly test our new MP for the example Data object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">THC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">10</span>)<span class="op">@</span>TAC</code></pre></div>
<pre><code>##  [1] 80.76040 93.73530 78.57651 71.52528 86.93342 93.19337 84.81037
##  [8] 83.08070 71.91512 82.12945</code></pre>
<p>Now that we know it works, to make the function compatible with the DLMtool package we have to assign it the class ‘MP’ so that DLMtool recognizes the function as a management procedure</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(THC)&lt;-<span class="st">&quot;MP&quot;</span></code></pre></div>
<p>If we want to run the MSE in parallel we need to export the newly created function to the cluster:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sfExport</span>(<span class="st">&#39;THC&#39;</span>)</code></pre></div>
</div>
<div id="a-more-complex-mp" class="section level2">
<h2><span class="header-section-number">22.3</span> A More Complex MP</h2>
<p>The THC MP is simple and frankly not a great performer (depending on depletion, life-history, adherence to TAC recommendations).</p>
<p>Let’s innovate and create a brand new MP that could suit a catch-data-only stock like Indian Ocean Longtail tuna!</p>
<p>It may be possible to choose a single fleet and establish a catch rate that is ‘reasonable’ or ‘fairly productive’ relative to current catch rates. This could be for example, 40% of the highest catch rate observed for this fleet or, for example, 150% of current cpue levels.</p>
<p>It is straightforward to design an MP that will aim for this target index level by making adjustments to the TAC.</p>
<p>We will call this MP <code>TCPUE</code>, short for target catch per unit effort:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">TCPUE&lt;-<span class="cf">function</span>(x,Data,reps){
  
  mc&lt;-<span class="fl">0.05</span>                             <span class="co"># max change in TAC </span>
  frac&lt;-<span class="fl">0.3</span>                            <span class="co"># target index is 30% of max</span>
  nyears&lt;-<span class="kw">length</span>(Data<span class="op">@</span>Ind[x,])         <span class="co"># number of years of data</span>
  
  smoothI&lt;-<span class="kw">smooth.spline</span>(Data<span class="op">@</span>Ind[x,]) <span class="co"># smoothed index  </span>
  targetI&lt;-<span class="kw">max</span>(smoothI<span class="op">$</span>y)<span class="op">*</span>frac         <span class="co"># target </span>
  
  currentI&lt;-<span class="kw">mean</span>(Data<span class="op">@</span>Ind[x,(nyears<span class="op">-</span><span class="dv">2</span>)<span class="op">:</span>nyears]) <span class="co"># current index</span>
  
  ratio&lt;-currentI<span class="op">/</span>targetI              <span class="co"># ratio currentI/targetI</span>
  
  <span class="cf">if</span>(ratio <span class="op">&lt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc <span class="co"># if currentI &lt; targetI</span>
  <span class="cf">if</span>(ratio <span class="op">&gt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc <span class="co"># if currentI &gt; targetI</span>
 
  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)
  Rec<span class="op">@</span>TAC &lt;-<span class="st">  </span>Data<span class="op">@</span>MPrec[x] <span class="op">*</span><span class="st"> </span>ratio <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="op">-</span>Data<span class="op">@</span>CV_Ind[x]<span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, Data<span class="op">@</span>CV_Ind[x]))
  Rec
}</code></pre></div>
<p>The TCPUE function simply decreases the past TAC (stored in <code>Data@MPrec</code>) if the index is lower than the target and increases the TAC if the index is higher than the target.</p>
<p>All that is left is to make it compatible with DLMtool:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(TCPUE)&lt;-<span class="st">&quot;MP&quot;</span>
<span class="kw">sfExport</span>(<span class="st">&quot;TCPUE&quot;</span>)</code></pre></div>
</div>
<div id="beyond-the-catch-limit" class="section level2">
<h2><span class="header-section-number">22.4</span> Beyond the Catch Limit</h2>
<p>All management procedures return an object of class ‘Rec’ that contains 13 slots:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">slotNames</span>(<span class="st">&quot;Rec&quot;</span>)</code></pre></div>
<pre><code>##  [1] &quot;TAC&quot;      &quot;Effort&quot;   &quot;Spatial&quot;  &quot;Allocate&quot; &quot;LR5&quot;      &quot;LFR&quot;     
##  [7] &quot;HS&quot;       &quot;Rmaxlen&quot;  &quot;L5&quot;       &quot;LFS&quot;      &quot;Vmaxlen&quot;  &quot;Fdisc&quot;   
## [13] &quot;Misc&quot;</code></pre>
<p>We’ve already seen the TAC slot in the previous exercise. The remaining slots relate to various forms of input control:</p>
<ul>
<li>Effort (total allowable effort (TAE) relative to last historical year)</li>
<li>Spatial - Fraction of each area that is open</li>
<li>Allocate - Allocation of effort from closed areas to open areas</li>
<li>LR5 - Length at 5% retention</li>
<li>LFR - Length at 100% retention</li>
<li>HS - Upper slot limit</li>
<li>Rmaxlen - Retention of the maximum length class</li>
<li>L5 - Length at 5% selection (e.g a change in gear type)</li>
<li>LFS - Length at 100% selection (e.g a change in gear type)</li>
<li>Vmaxlen - Selectivity of the maximum length class</li>
<li>Fdisc - Update the discard mortality if required</li>
<li>Misc - An optional slot for storing additional information</li>
</ul>
<p>The curE MP just keeps effort constant at current levels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">curE</code></pre></div>
<pre><code>## function (x, Data, ...) 
## {
##     rec &lt;- new(&quot;Rec&quot;)
##     rec@Effort &lt;- 1
##     rec
## }
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>Note that only the <code>Effort</code> slot in the <code>Rec</code> object is populated in this case.</p>
<p>To highlight the differences among Input control MPs examine spatial control MP <code>MRreal</code> that closes area 1 to fishing and reallocates fishing to the open area 2:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MRreal</code></pre></div>
<pre><code>## function (x, Data, ...) 
## {
##     rec &lt;- new(&quot;Rec&quot;)
##     rec@Allocate &lt;- 1
##     rec@Spatial &lt;- c(0, rep(1, Data@nareas - 1))
##     return(rec)
## }
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>In contrast ‘MRnoreal’ does not reallocate fishing effort:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MRnoreal</code></pre></div>
<pre><code>## function (x, Data, ...) 
## {
##     rec &lt;- new(&quot;Rec&quot;)
##     rec@Allocate &lt;- 0
##     rec@Spatial &lt;- c(0, rep(1, Data@nareas - 1))
##     return(rec)
## }
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>The MP <code>matlenlim</code> only specifies the parameters of length retention using an estimate of length at 50% maturity (<code>Stock@L50</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matlenlim</code></pre></div>
<pre><code>## function (x, Data, ...) 
## {
##     dependencies = &quot;Data@L50&quot;
##     rec &lt;- new(&quot;Rec&quot;)
##     rec@LR5 &lt;- Data@L50[x] * 0.95
##     rec@LFR &lt;- Data@L50[x]
##     rec
## }
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<div id="an-example-effort-control" class="section level3">
<h3><span class="header-section-number">22.4.1</span> An Example Effort Control</h3>
<p>Here we will copy and modify the MP we developed earlier to specify a new version of the target catch per unit effort MP (<code>TCPUE</code>) that provides effort recommendations:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">TCPUE_e&lt;-<span class="cf">function</span>(x,Data,reps){
  
  mc&lt;-<span class="fl">0.05</span>                             <span class="co"># max change in TAC </span>
  frac&lt;-<span class="fl">0.3</span>                            <span class="co"># target index is 30% of max</span>
  nyears&lt;-<span class="kw">length</span>(Data<span class="op">@</span>Ind[x,])         <span class="co"># number of years of data</span>
  
  smoothI&lt;-<span class="kw">smooth.spline</span>(Data<span class="op">@</span>Ind[x,]) <span class="co"># smoothed index  </span>
  targetI&lt;-<span class="kw">max</span>(smoothI<span class="op">$</span>y)<span class="op">*</span>frac         <span class="co"># target </span>
  
  currentI&lt;-<span class="kw">mean</span>(Data<span class="op">@</span>Ind[x,(nyears<span class="op">-</span><span class="dv">2</span>)<span class="op">:</span>nyears]) <span class="co"># current index</span>
  
  ratio&lt;-currentI<span class="op">/</span>targetI              <span class="co"># ratio currentI/targetI</span>
  
  <span class="cf">if</span>(ratio <span class="op">&lt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc <span class="co"># if currentI &lt; targetI</span>
  <span class="cf">if</span>(ratio <span class="op">&gt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc <span class="co"># if currentI &gt; targetI</span>
  
  rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)
  rec<span class="op">@</span>Effort &lt;-<span class="st"> </span>Data<span class="op">@</span>MPeff[x] <span class="op">*</span><span class="st"> </span>ratio
  rec
  
}</code></pre></div>
<p>There have been surprisingly few changes to make TCPUE an input control MP that sets total allowable effort.</p>
<ol style="list-style-type: decimal">
<li>We have had to use stored recommendations of effort in the <code>Data@MPeff</code> slot, and</li>
<li>The final line of the MP is our input control recommendatation that only modified the Effort.</li>
</ol>
<p>That is all. Again, we need to assign our new function to class <code>MP</code> and export it to the cluster:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(TCPUE_e)&lt;-<span class="st">&quot;MP&quot;</span>
<span class="kw">sfExport</span>(<span class="st">&#39;TCPUE_e&#39;</span>)</code></pre></div>
<p>Let’s test the two MPs and see how they peform:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">testMSE&lt;-<span class="kw">runMSE</span>(testOM,<span class="dt">MPs=</span><span class="kw">c</span>(<span class="st">&quot;TCPUE&quot;</span>,<span class="st">&quot;TCPUE_e&quot;</span>), <span class="dt">parallel =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Running MSE in parallel on 4 processors</code></pre>
<pre><code>## MSE completed</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">NOAA_plot</span>(testMSE)</code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
<pre><code>##         PNOF  B50  LTY   VY
## TCPUE   59.7 66.5 47.9 87.5
## TCPUE_e 65.3 83.8 83.8  0.0</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="customizing-the-operating-model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-parameters.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["userguide.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"<!--edit": "https://github.com/DLMtool/DLMtool_UserGuide/edit/master/%s-->"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
